<!doctype html>
<html>
<head>
	<title>d2l-button-group</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://s.brightspace.com/lib/webcomponentsjs/0.7.21/webcomponents-lite.min.js"></script>
	<link rel="import" href="../../d2l-demo-template/d2l-demo-template.html">
	<link rel="import" href="../d2l-button-group.html">
	<link rel="import" href="../../d2l-button/d2l-button.html">
	<style is="custom-style">
	</style>
</head>
<body unresolved>

	<d2l-demo-template title="d2l-icons">
		<div class="d2l-demo-fixture">
			<!--
			Workaround for an interesting bug in Polymer that was causing errors
			when event listeners were registered because d2l-demo-template doesn't
			create a dataHost (A "Templatizer" grabs it's parent's dataHost, rather
			than creating a new one)
			-->
			<template is="dom-bind">

			<label for="some-input">Number of test buttons to add:</label>
			<input id="some-input" type="number">
			<br/>
			<label for="some-input2">Keep at least this many:</label>
			<input id="some-input2" type="number" value="{{keep::input}}">
			<br/>
			<span>[[buttonText]]</span>

			<h2 class="d2l-heading-4">button menu</h2>
			<p>
				<d2l-button-group id="button-group-0" keep="[[keep]]">
					<template strip-whitespace>
						<button is="d2l-button" primary>Edit Submission Folder</button>
						<template is="dom-repeat" items="[[items]]">
							<button is="d2l-button">Test Button [[index]]</button>
						</template>
						<button is="d2l-button">Email Users Without Submissions</button>
						<button is="d2l-button">Add Feedback Files</button>
						<button is="d2l-button">Submission Log</button>
					</template>
				</d2l-button-group>
			</p>

			<h2 class="d2l-heading-4">button menu keep 2</h2>
			<p>
				<d2l-button-group keep="2">
					<template strip-whitespace>
						<button is="d2l-button" primary>Edit Submission Folder</button>
						<button is="d2l-button">Email Users Without Submissions</button>
						<button is="d2l-button">Add Feedback Files</button>
						<button is="d2l-button">Submission Log</button>
					</template>
				</d2l-button-group>
			</p>

			<h2 class="d2l-heading-4">button menu keep all</h2>
			<p>
				<d2l-button-group keep="2">
					<template strip-whitespace>
						<button is="d2l-button" primary>Edit Submission Folder</button>
						<button is="d2l-button">Email Users Without Submissions</button>
					</template>
				</d2l-button-group>
			</p>

			<h2 class="d2l-heading-4">button menu with dropdown</h2>
			<p>
				<d2l-button-group keep="1">
					<template strip-whitespace>
						<button is="d2l-button" primary>Primary Button</button>
						<d2l-dropdown-button text="Add Participants">
							<d2l-dropdown-menu>
								<d2l-menu label="Add Participants">
									<d2l-menu-item text="Add Existing Users"></d2l-menu-item>
									<d2l-menu-item text="Create and enroll a new user"></d2l-menu-item>
									<d2l-menu-item text="Import users from file"></d2l-menu-item>
								</d2l-menu>
							</d2l-dropdown-menu>
						</d2l-dropdown-button>
						<button is="d2l-button">Something else</button>
						<button is="d2l-button">Something else</button>
					</template>
				</d2l-button-group>
			</p>

			<h2 class="d2l-heading-4">button menu</h2>
			<p>
				<d2l-button-menu text="Dropdown">
					<template strip-whitespace>
						<button is="d2l-button" primary>Primary Button</button>
						<d2l-dropdown-button text="Stuff">
							<d2l-dropdown-menu>
								<d2l-menu label="Stuff">
									<d2l-menu-item text="Add Existing Users"></d2l-menu-item>
									<d2l-menu-item text="Create and enroll a new user"></d2l-menu-item>
									<d2l-menu-item text="Import users from file"></d2l-menu-item>
								</d2l-menu>
							</d2l-dropdown-menu>
						</d2l-dropdown-button>
						<button is="d2l-button">Something else</button>
						<button is="d2l-button">Something else</button>
					</template>
				</d2l-button-menu>
			</p>

			<script>
				(function() {
					var template = document.querySelector('[is=dom-bind]');
					var groups = document.getElementsByTagName('d2l-button-group');
					[].forEach.call(groups, function(group) {
						group.addEventListener('d2l-button-group-select', function(e) {
							var src = e.detail.src;
							if (src.tagName.toLowerCase() === 'button') {
								group.dataHost.buttonText = src.textContent + ' button clicked!';
							} else {
								group.dataHost.buttonText = src.text + ' submenu clicked!';
							}
						});
					});

					var input = document.getElementById('some-input');
					input.addEventListener('input', function() {
						var value = +input.value;
						var items = new Array(value);
						template.items = items;
					});

					template.buttonText = 'nothing clicked yet!';
				})();
			</script>
			</template>
		</div>
	</d2l-demo-template>

</body>
</html>
